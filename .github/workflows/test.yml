name: Valida√ß√£o dos Desafios Python

on:
  push:
    branches: [ main, master, copilot/** ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:

permissions:
  contents: read

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        python-version: ['3.8', '3.9', '3.10', '3.11']
    
    steps:
    - name: Checkout do c√≥digo
      uses: actions/checkout@v4
    
    - name: Configurar Python ${{ matrix.python-version }}
      uses: actions/setup-python@v4
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Exibir vers√£o do Python
      run: python --version
    
    - name: Executar testes dos desafios
      run: |
        echo "üß™ Executando testes dos 6 desafios..."
        python -m unittest test_desafios -v
    
    - name: Validar estrutura dos arquivos
      run: |
        echo "üìÅ Verificando estrutura de arquivos..."
        test -f resolucoes_code/concat_dados.py && echo "‚úÖ concat_dados.py existe"
        test -f resolucoes_code/repet_txt.py && echo "‚úÖ repet_txt.py existe"
        test -f resolucoes_code/ope_mat.py && echo "‚úÖ ope_mat.py existe"
        test -f resolucoes_code/par_impar.py && echo "‚úÖ par_impar.py existe"
        test -f resolucoes_code/media_notas.py && echo "‚úÖ media_notas.py existe"
        test -f resolucoes_code/palindromo.py && echo "‚úÖ palindromo.py existe"
        echo "‚úÖ Todos os arquivos de solu√ß√£o est√£o presentes!"
    
    - name: Verificar sintaxe Python
      run: |
        echo "üîç Verificando sintaxe dos arquivos Python..."
        python -m py_compile resolucoes_code/concat_dados.py
        python -m py_compile resolucoes_code/repet_txt.py
        python -m py_compile resolucoes_code/ope_mat.py
        python -m py_compile resolucoes_code/par_impar.py
        python -m py_compile resolucoes_code/media_notas.py
        python -m py_compile resolucoes_code/palindromo.py
        echo "‚úÖ Todos os arquivos t√™m sintaxe v√°lida!"
    
    - name: Relat√≥rio de sucesso
      if: success()
      run: |
        echo "üéâ Todos os testes passaram com sucesso!"
        echo "‚úÖ Desafio 1: Concatenar Dados - OK"
        echo "‚úÖ Desafio 2: Repetir Texto - OK"
        echo "‚úÖ Desafio 3: Opera√ß√µes Matem√°ticas - OK"
        echo "‚úÖ Desafio 4: Par ou √çmpar - OK"
        echo "‚úÖ Desafio 5: M√©dia de Notas - OK"
        echo "‚úÖ Desafio 6: Pal√≠ndromos - OK"
